# Json SerDe

```
DROP TABLE IF EXISTS twits;
CREATE EXTERNAL TABLE twits (
	messages ARRAY<STRUCT<body: STRING>>
)
ROW FORMAT SERDE 'org.openx.data.jsonserde.JsonSerDe' 
STORED AS TEXTFILE
LOCATION '/tmp/twits';

select messages from twits;

select message from twits lateral view explode(messages.body) messages as message;
```
## 利用例
### HiveでJSONデータを処理するあれこれ(初級編)
https://qiita.com/unksato/items/42405305c28e5a788cd7
### HiveでJSONデータを処理するあれこれ(中級編)
Https://qiita.com/unksato/items/604edb73eb636dc8ada7

{ "a": "abc", "b": 123, "c": { "aa": "xyz", "bb": 987 }, "d": [1,2,3], "e": [ { "aaa": "ABC", "bbb": 12345 }, { "aaa": "XYZ", "bbb": 98765 } ] }


## OpenX

### AWS JSON SerDeライブラリ
Ja: https://docs.aws.amazon.com/ja_jp/athena/latest/ug/json.html#hivejson
En： https://docs.aws.amazon.com/athena/latest/ug/json.html#hivejson

#### Create Tables in Amazon Athena from Nested JSON and Mappings Using JSONSerDe
https://aws.amazon.com/blogs/big-data/create-tables-in-amazon-athena-from-nested-json-and-mappings-using-jsonserde/


https://github.com/rcongiu/Hive-JSON-Serde

https://github.com/rcongiu/Hive-JSON-Serde.git

json-serde-cdh5-shim

#### 

### Download json-serde JAR files with dependency
https://jar-download.com/?search_box=json-serde

## Misc

### Apache Json is recomended here
https://community.cloudera.com/t5/Batch-SQL-Apache-Hive/Create-Hive-Table-from-JSON-Files/td-p/64006

### Cannot validate serde : org.openx.data.jsonserde.jsonserde
https://stackoverflow.com/questions/26644351/cannot-validate-serde-org-openx-data-jsonserde-jsonserde

## Troubleshooting

ファイルが置いていない時（も）このエラー
Cannot validate serde : org.openx.data.jsonserde.jsonserde


